<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="学习之余，记录生活"><title>SQL语句的学习与使用 | 满川风雨看潮生</title><link rel="stylesheet" type="text/css" href="//fonts.neworld.org/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.1"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.1"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">SQL语句的学习与使用</h1><a id="logo" href="/.">满川风雨看潮生</a><p class="description">Deceive the world</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="Arama"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">SQL语句的学习与使用</h1><div class="post-meta"><a href="/2018/05/23/180523/#comments" class="comment-count"></a><p><span class="date">May 23, 2018</span><span><a href="/categories/数据库/" class="category">数据库</a></span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>点击</i></i></span></p></div><div class="post-content"><blockquote>
<p>从实际出发，坚持理论与实践相结合的原则。<br><a id="more"></a></p>
</blockquote>
<h3 id="导语篇"><a href="#导语篇" class="headerlink" title="导语篇"></a>导语篇</h3><p>最近由于工作的需要，遇到了需要大量使用sql语句的地方，同时也有一定的难度，至少以学校所学是没法解决的，所以想在这里写下这篇博客，记录一下所学到的所用到的知识，既是总结也是一次重新学习，顺便能利用公司庞大的数据表和查询结构来提高自己，因为单靠自己估计不会有遇到这种复杂的问题的机会。</p>
<h3 id="语法篇"><a href="#语法篇" class="headerlink" title="语法篇"></a>语法篇</h3><h4 id="case"><a href="#case" class="headerlink" title="case"></a>case</h4><p>根据oracle的官方文档来看，分为普通case表达式和搜索case表达式两种，用个例子说明，<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//simple_case_expression</span><br><span class="line">CASE sex</span><br><span class="line">WHEN &apos;1&apos; THEN &apos;男&apos;</span><br><span class="line">WHEN &apos;2&apos; THEN &apos;女&apos;</span><br><span class="line">ELSE &apos;未知&apos; END</span><br><span class="line"></span><br><span class="line">//searched_case_expression</span><br><span class="line">CASE</span><br><span class="line">WHEN sex=&apos;1&apos; THEN &apos;男&apos;</span><br><span class="line">WHEN sex=&apos;2&apos; THEN &apos;女&apos;</span><br><span class="line">ELSE &apos;未知&apos; END</span><br></pre></td></tr></table></figure></p>
<p>两种方式的区别在于，simple case更加简洁，而searched case功能更多，甚至可以写判断式</p>
<p>case的作用：</p>
<ol>
<li>将已知数据按照另一种方式进行分组，比如给一定范围内的数据划分一个等级</li>
<li>用一个sql语句完成不同条件的分组</li>
<li>在check中使用</li>
</ol>
<h4 id="group-by"><a href="#group-by" class="headerlink" title="group by"></a>group by</h4><p>根据一定的规则进行分组。通过一定的规则将一个数据集划分成为若干个小的趋于，然后对若干小区域进行数据处理</p>
<p>使用规则：</p>
<ol>
<li>group by X 的意思是所有具有相同X字段值的记录放在同一个分组里</li>
<li>group by X,Y 意思是将所有具有相同字段值X和Y的记录放在同一个分组，也就是在第一层分组的基础上再进行一次分组</li>
</ol>
<p>使用时要注意的点：</p>
<ol>
<li>组函数以外的select列表里的字段，必须出现在group by中。</li>
<li>使用group by进行分组，select列表中的字段必须要有组函数。</li>
<li>如果要对分组后的结果再进行筛选，要用having而不是where</li>
</ol>
<p>这里既然提到了分组函数，那么就做一个简要的介绍。分组函数作用于一组数据，并对一组数据返回一个值，例如avg，max，sum，count这些。也叫聚合函数吧，因为英文名是aggregate function。分组函数一般会和group by一起使用。</p>
<h4 id="with-…-as"><a href="#with-…-as" class="headerlink" title="with … as"></a>with … as</h4><p>这个语句用来定义一个sql语句片段，这个片段能够被整个sql语句使用，也就是一个子查询。用来取出一个较长的sql片段提高可读性，也可以用在union的数据源部分，避免了语句的冗余以及多次查询。</p>
<p>注意问题：</p>
<ol>
<li>后面必须直接跟使用它的sql语句（如select insert update等），否则将失效。</li>
<li><p>可以定义多个代码片段，但是只能由一个with，多个片段之间用逗号”,”隔开：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">with</span><br><span class="line">cte1 as</span><br><span class="line">(</span><br><span class="line">    select ···</span><br><span class="line">),</span><br><span class="line">cte2 as</span><br><span class="line">(</span><br><span class="line">    select ···</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</li>
<li><p>当命名和数据库表或是视图重名时，后面紧跟的那个语句还是使用这个子查询。</p>
</li>
</ol>
<h4 id="union"><a href="#union" class="headerlink" title="union"></a>union</h4><p>这个操作符用于合并多个select语句的结果集。union内部的每个结果集应该有数量相同的列，列也应该是拥有相似的数据类型，顺序也要一致。</p>
<p>union结果集中的列名总是等于union中第一个select语句中的列名。</p>
<p>union all与union语句都是合并结果集的操作，不过union all不会剔除重复的记录，union在合并结果集后会删除重复的记录，还会进行排序。所以使用union all效率是高于union的。</p>
<h4 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h4><p>通常来讲，子查询返回的数据的类型有三种，返回一张数据表，返回一列值，返回单个值。返回类型不同在使用时也会有不同。</p>
<ol>
<li>作为数据源使用</li>
</ol>
<p>当子查询在外部查询FROM字句之后使用时，即使子查询只返回一个单一值(Scalar)或是一列值，依然可以看作是一个特殊的数据源。作为数据源使用的子查询很像视图，但是只是临时存在，不在数据库中。</p>
<p>使用子查询的返回类型要随外层方法的不同而变化，例如在from关键字后的子查询可以返回一张二维表，而in这种只能返回单列数据，所以其实还是按照外围的方法来的。</p>
<ol>
<li>作为选择条件使用</li>
</ol>
<p>作为选择条件的子查询是那些值返回一列的子查询，单个值当作只有一行的列使用。</p>
<p>（有种说法是，尽量不要使用IN，除非IN里面是固定的值，可以使用EXISTS等关键字代替，在<a href="http://wiki.lessthandot.com/index.php/Subquery_typo_with_using_in" target="_blank" rel="noopener">Subquery typo with using in</a>详细的说明和讲解，我在这里就不再赘述）</p>
<ol>
<li>子查询作为计算列使用</li>
</ol>
<p>当子查询作为计算列使用时，会针对外部查询的每一行，返回单个唯一值。</p>
<h3 id="应用篇"><a href="#应用篇" class="headerlink" title="应用篇"></a>应用篇</h3><p>sql作为一种声明式的语言，和其他许多程序语言不同，你不需要告诉计算机应该怎么做，而是要告诉计算机你要什么。</p>
<p>所以，sql语句在执行顺序上与声明顺序有着很大的不同，而且根据使用的数据库的不同解析方式也会有所变化。</p>
<p>因为sql语句在执行过程中每个步骤都会产生一个虚拟表，这个虚拟表会作为下一个步骤的输入。所以了解执行顺序对于写出正确的sql语句是十分重要的，例如，在where中不能够使用select中设定的别名，就是因为select是在where之后执行。</p>
<h4 id="select语句的执行顺序（从使用者角度）"><a href="#select语句的执行顺序（从使用者角度）" class="headerlink" title="select语句的执行顺序（从使用者角度）"></a>select语句的执行顺序（从使用者角度）</h4><ol>
<li>from子句组装来自不同数据源的数据；</li>
<li>where子句基于指定的条件对记录行进行筛选；</li>
<li>group by子句将数据划分为多个分组；</li>
<li>使用聚集函数进行计算；</li>
<li>使用having子句筛选分组；</li>
<li>计算所有的表达式；</li>
<li>select 的字段；</li>
<li>使用order by对结果集进行排序。</li>
</ol>
<h4 id="select语句的执行步骤（从内部实现角度）"><a href="#select语句的执行步骤（从内部实现角度）" class="headerlink" title="select语句的执行步骤（从内部实现角度）"></a>select语句的执行步骤（从内部实现角度）</h4><ol>
<li>语法分析，分析语句的语法是否符合规范</li>
<li>语义分析，检查语句中涉及的数据库对象是否存在，以及用户的权限</li>
<li>视图转换，将涉及视图的查询语句转换为相应的对基表查询语句</li>
<li>表达式转换，将复杂的SQL表达式转换为较简单的等效连接表达式</li>
<li>选择优化器，不同的优化器一般产生不同的执行计划</li>
<li>选择连接方式，oracle有三种连接方式</li>
<li>选择连接顺序，确定多表连接时哪个表为源数据表</li>
<li>选择数据的搜索路径，确定是使用全表搜索还是索引或其他方式</li>
<li>运行执行计划</li>
</ol>
<h4 id="逻辑查询处理阶段"><a href="#逻辑查询处理阶段" class="headerlink" title="逻辑查询处理阶段"></a>逻辑查询处理阶段</h4><p>1、 FROM：对FROM子句中的前两个表执行笛卡尔积(交叉联接)，生成虚拟表VT1。</p>
<p>2、 ON：对VT1应用ON筛选器，只有那些使为真才被插入到TV2。</p>
<p>3、 OUTER (JOIN):如果指定了OUTER JOIN(相对于CROSS JOIN或INNER JOIN)，保留表中未找到匹配的行将作为外部行添加到VT2，生成TV3。如果FROM子句包含两个以上的表，则对上一个联接生成的结果表和下一个表重复执行步骤1到步骤3，直到处理完所有的表位置。</p>
<p>4、 WHERE：对TV3应用WHERE筛选器，只有使为true的行才插入TV4。</p>
<p>5、 GROUP BY：按GROUP BY子句中的列列表对TV4中的行进行分组，生成TV5。</p>
<p>6、 CUTE|ROLLUP：把超组插入VT5，生成VT6。</p>
<p>7、 HAVING：对VT6应用HAVING筛选器，只有使为true的组插入到VT7。</p>
<p>8、 SELECT：处理SELECT列表，产生VT8。</p>
<p>9、 DISTINCT：将重复的行从VT8中删除，产品VT9。</p>
<p>10、ORDER BY：将VT9中的行按ORDER BY子句中的列列表顺序，生成一个游标(VC10)。</p>
<p>11、TOP：从VC10的开始处选择指定数量或比例的行，生成表TV11，并返回给调用者。</p>
<h4 id="工作中的两个实际应用"><a href="#工作中的两个实际应用" class="headerlink" title="工作中的两个实际应用"></a>工作中的两个实际应用</h4><p>在公司的系统中，统计使用的实现方式是查询出所有的内容，将所有的数据都放进一个vo数组中，在服务器端拼接html语句，再传输到前端去。（因为并没有使用视图层的框架，是采取直接传html、js再用ajax获取数据的方式）</p>
<p>由于上述的实现和显示方式，那么在查询出的结果集中就需要有表头和表项两个部分。</p>
<ol>
<li>按照某一字段的种类进行统计</li>
</ol>
<p>这个相对简单一些，只需要对选出的数据进行一次分组，再用union加上一个表头行和一个总计行就行了，抛去中间的对一些数据权限字段的验证等，以最高学历的统计为例，这种实现方式的sql语句结构为：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">WITH tempStatsData AS(</span><br><span class="line">SELECT (case when p.highestEducationName is null then &apos;未知&apos; else p.highestEductationName end) 项目, count(p.id) 合计</span><br><span class="line">FROM police_base_info p where 1=1</span><br><span class="line">GROUP BY p.highestEducationName</span><br><span class="line">)</span><br><span class="line">SELECT &apos;总计&apos; 项目,SUM(t.合计) 合计,null 百分比 FROM tempStatsData t</span><br><span class="line">UNION ALL</span><br><span class="line">SELECT t.项目,t.合计,ROUND(t.合计*100/SUM(t.合计) over(),2) 百分比 FROM tempStatsData t</span><br><span class="line">ORDER BY 合计 DESC</span><br></pre></td></tr></table></figure></p>
<ol>
<li>对某一字段分类统计</li>
</ol>
<p>而如果需要对数据进行分段就会比较麻烦了，比如把出生日期转换成年龄段来进行统计，这种需求最容易想到的方式就是把出生日期统一成不同年龄区间的数据：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">case when trunc(months_between(to_date(&apos;2018-04-26&apos;,&apos;yyyy-MM-dd&apos;),b.csrq)/12)&gt;=0 and trunc(months_between(to_date(&apos;2018-04-26&apos;,&apos;yyyy-MM-dd&apos;),b.csrq)/12)&lt;=18 then &apos;0~18岁&apos;</span><br><span class="line">case when ··· then ···</span><br><span class="line">else ··· end</span><br></pre></td></tr></table></figure></p>
<p>但是这种方式得到的只是一个修改了表项的原始数据表，因为sql语句的执行顺序原因，没有办法进行分组操作。但是我们可以以这张表作为一个中间表，对此表内的数据进行二次操作，达到按照年龄段分组的统计结果。当然在具体执行过程中，年龄段的分配可以动态变化，所以sql语句是可以拼接的，下面给出的语句也只是一个demo：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">with temp as(select</span><br><span class="line">(case  when trunc(months_between(to_date(&apos;2018-04-26&apos;,&apos;yyyy-MM-dd&apos;),b.csrq)/12)&gt;=0 and trunc(months_between(to_date(&apos;2018-04-26&apos;,&apos;yyyy-MM-dd&apos;),b.csrq)/12)&lt;=18 then &apos;0~18岁&apos;</span><br><span class="line">when trunc(months_between(to_date(&apos;2018-04-26&apos;,&apos;yyyy-MM-dd&apos;),b.csrq)/12)&gt;=25 and trunc(months_between(to_date(&apos;2018-04-26&apos;,&apos;yyyy-MM-dd&apos;),b.csrq)/12)&lt;=34 then &apos;25~34岁&apos;</span><br><span class="line">when trunc(months_between(to_date(&apos;2018-04-26&apos;,&apos;yyyy-MM-dd&apos;),b.csrq)/12)&gt;=35 then &apos;35岁以上&apos; else null end) 项目,</span><br><span class="line">(case when b.sys_permCode = &apos;#&apos; then 1 else 0 end) keshi0,</span><br><span class="line">(case when b.sys_permCode = &apos;#&apos; then 1 else 0 end) keshi1,</span><br><span class="line">(case when b.sys_permCode = &apos;#&apos; then 1 else 0 end) keshi2,</span><br><span class="line">from pp_worker_base_info b where 1=1</span><br><span class="line">and b.sys_permCode in (&apos;#&apos;,&apos;#&apos;,&apos;#&apos;)</span><br><span class="line">)</span><br><span class="line">select tc.项目 ,nvl(keshi0,0) 科室0, nvl(keshi1,0) 科室1, nvl(keshi2,0) 科室2, 合计,nvl(百分比,0) 百分比</span><br><span class="line">from (select tt.项目 项目,sum(t.keshi0) keshi0,sum(t.keshi1) keshi1,sum(t.keshi2) keshi2,count(t.项目) 合计,</span><br><span class="line">decode(count(t.项目),0,0,round(count(t.项目) * 100 / sum(count(t.项目)) over(),2)) 百分比</span><br><span class="line">from temp t</span><br><span class="line">right join(</span><br><span class="line">select &apos;0~18岁&apos; 项目, 1 sort from dual</span><br><span class="line">union</span><br><span class="line">select &apos;25~34岁&apos; 项目, 2 sort from dual</span><br><span class="line">union</span><br><span class="line">select &apos;35岁以上&apos; 项目, 3 sort from dual</span><br><span class="line">) tt on t.项目=tt.项目</span><br><span class="line">group by tt.项目 ,tt.sort</span><br><span class="line">order by tt.sort</span><br><span class="line">) tc</span><br></pre></td></tr></table></figure></p>
<p>上面sql语句中的sys_permCode是当前所拥有的科室的权限数据，用于分科室统计其中的数据信息。</p>
<p>由于统计的需求，需要将没有数据的行也展示出来，所以使用<code>union</code>得到对所有列头的枚举，以及排序字段，再通过<code>right join</code>语句合并到主查询之中。</p>
<p>这种方式比起第一种有一个比较严重的问题，就是没法生成总计行。（就在整理内容准备写这篇文章的当口，我好像找到了解决这个问题的办法）当时由于进度的原因就只能想了个折中方法，在service层中，对取得的数据做一次手动的统计，也是无奈之举。</p>
<p>不过这两天得空，重新思考了一下sql语句的结构，发现可以在子查询里拼装，而不是在right join字句或是结果集中添加，变动后的语句如下(原语句内容太多了，做了一点删减)：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">with tempStatsData as(select</span><br><span class="line">(case  when trunc(months_between(to_date(&apos;2018-05-04&apos;,&apos;yyyy-MM-dd&apos;),b.csrq)/12)&gt;=0 and trunc(months_between(to_date(&apos;2018-05-04&apos;,&apos;yyyy-MM-dd&apos;),b.csrq)/12)&lt;=18 then &apos;19岁以下&apos;</span><br><span class="line">when trunc(months_between(to_date(&apos;2018-05-04&apos;,&apos;yyyy-MM-dd&apos;),b.csrq)/12)&gt;=26 then &apos;26岁以上&apos;</span><br><span class="line">when trunc(months_between(to_date(&apos;2018-05-04&apos;,&apos;yyyy-MM-dd&apos;),b.csrq)/12)&gt;=19 and trunc(months_between(to_date(&apos;2018-05-04&apos;,&apos;yyyy-MM-dd&apos;),b.csrq)/12)&lt;=25 then &apos;19~25岁&apos; else null end) 项目,</span><br><span class="line">(case when b.sys_permCode = &apos;#&apos; then 1 else 0 end) keshi0,   /*这个code的具体内容在这个例子中不重要，所以直接省略了，用#代替*/</span><br><span class="line">(case when b.sys_permCode = &apos;#&apos; then 1 else 0 end) keshi1,</span><br><span class="line">(case when b.sys_permCode = &apos;#&apos; then 1 else 0 end) keshi2,</span><br><span class="line">from pp_worker_base_info b where 1=1</span><br><span class="line">and b.sys_permCode in (&apos;#&apos;,&apos;#&apos;,&apos;#&apos;))</span><br><span class="line">select tc.项目,nvl(keshi0,0) keshi0,nvl(keshi1,0) keshi1,nvl(keshi2,0) keshi2,nvl(合计,0) 人数,百分比</span><br><span class="line">from (</span><br><span class="line">select &apos;总计&apos; 项目,0 sort,sum(keshi0) keshi0,sum(keshi1) keshi1,sum(keshi2) keshi2,count(t.项目) 合计, null 百分比 from tempStatsData t</span><br><span class="line">union</span><br><span class="line">select tt.项目 项目,sort,sum(t.keshi0) keshi0,sum(t.keshi1) keshi1,sum(t.keshi2) keshi2,count(t.项目) 合计,decode(count(t.项目),0,0,round(count(t.项目) * 100 / sum(count(t.项目)) over(),2)) 百分比 from tempStatsData t  </span><br><span class="line">right join( select &apos;19岁以下&apos; 项目, 1 sort from dual</span><br><span class="line">union  </span><br><span class="line">select &apos;26岁以上&apos; 项目, 3 sort from dual</span><br><span class="line">union  </span><br><span class="line">select &apos;19~25岁&apos; 项目, 2 sort from dual</span><br><span class="line">) tt on t.项目=tt.项目</span><br><span class="line">group by tt.项目, tt.sort</span><br><span class="line">) tc</span><br><span class="line">order by tc.sort;</span><br></pre></td></tr></table></figure></p>
<p>其实关键就是要分清楚查询与子查询级数的问题，子查询的结果集能够作为外层查询的数据源，当不能够一次性得到自己需要的数据时，使用子查询可以很好的处理，但是在写的时候要十分注意嵌套的层数关系，避免在语句多起来以后分不清层级关系，从而出现混乱和错误。</p>
<h3 id="提高篇"><a href="#提高篇" class="headerlink" title="提高篇"></a>提高篇</h3><ul>
<li>留待以后</li>
</ul>
<h3 id="结语篇"><a href="#结语篇" class="headerlink" title="结语篇"></a>结语篇</h3><p>这次的这篇博客因为一些原因，断断续续写了大半个月才（半）完成，思路实在是续不上来，但又不想让努力付诸东流，于是草草写完，中间的好多东西完整性都不够，也没有深度，但是也只能就这样了。希望能看到这里的人见谅。</p>
</div><div class="tags"><a href="/tags/sql/">sql</a></div><div class="post-share"><div class="bdsharebuttonbox"><span style="float:left;line-height: 28px;height: 28px;font-size:16px;font-weight:blod">分享到：</span><a href="#" data-cmd="more" class="bds_more"></a><a href="#" data-cmd="mshare" title="分享到一键分享" class="bds_mshare"></a><a href="#" data-cmd="fbook" title="分享到Facebook" class="bds_fbook"></a><a href="#" data-cmd="twi" title="分享到Twitter" class="bds_twi"></a><a href="#" data-cmd="linkedin" title="分享到linkedin" class="bds_linkedin"></a><a href="#" data-cmd="youdao" title="分享到有道云笔记" class="bds_youdao"></a><a href="#" data-cmd="evernotecn" title="分享到印象笔记" class="bds_evernotecn"></a><a href="#" data-cmd="weixin" title="分享到微信" class="bds_weixin"></a><a href="#" data-cmd="qzone" title="分享到QQ空间" class="bds_qzone"></a><a href="#" data-cmd="tsina" title="分享到新浪微博" class="bds_tsina"></a></div></div><div class="post-nav"><a href="/2018/10/11/181011/" class="pre">秋招总结</a><a href="/2018/05/12/180512/" class="next">纪念512十周年有感</a></div><div id="comments"></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#导语篇"><span class="toc-text">导语篇</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#语法篇"><span class="toc-text">语法篇</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#case"><span class="toc-text">case</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#group-by"><span class="toc-text">group by</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#with-…-as"><span class="toc-text">with … as</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#union"><span class="toc-text">union</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#子查询"><span class="toc-text">子查询</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#应用篇"><span class="toc-text">应用篇</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#select语句的执行顺序（从使用者角度）"><span class="toc-text">select语句的执行顺序（从使用者角度）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#select语句的执行步骤（从内部实现角度）"><span class="toc-text">select语句的执行步骤（从内部实现角度）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#逻辑查询处理阶段"><span class="toc-text">逻辑查询处理阶段</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#工作中的两个实际应用"><span class="toc-text">工作中的两个实际应用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#提高篇"><span class="toc-text">提高篇</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#结语篇"><span class="toc-text">结语篇</span></a></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/03/03/190303/">Git使用总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/02/10/190210/">写在春节假期结束</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/11/181011/">秋招总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/23/180523/">SQL语句的学习与使用</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/12/180512/">纪念512十周年有感</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/01/180401/">volatile机制探究</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/20/180320/">关于Java中精确计算的问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/13/180313/">Springboot：Spring Data Jpa的使用</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/09/180309/">带重复元素以及不带重复元素的全排列</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/06/180306/">丑数2(Ugly Number Ⅱ)</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/JAVA基础/">JAVA基础</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/">Spring</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/并发/">并发</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/开发工具/">开发工具</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据库/">数据库</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/杂文/">杂文</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/算法/">算法</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/诗/">诗</a><span class="category-list-count">1</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/leetcode/" style="font-size: 15px;">leetcode</a> <a href="/tags/静态内部类/" style="font-size: 15px;">静态内部类</a> <a href="/tags/LinkedHashMap/" style="font-size: 15px;">LinkedHashMap</a> <a href="/tags/回忆/" style="font-size: 15px;">回忆</a> <a href="/tags/aop/" style="font-size: 15px;">aop</a> <a href="/tags/volatile/" style="font-size: 15px;">volatile</a> <a href="/tags/感想/" style="font-size: 15px;">感想</a> <a href="/tags/springboot/" style="font-size: 15px;">springboot</a> <a href="/tags/递归/" style="font-size: 15px;">递归</a> <a href="/tags/bigdecimal/" style="font-size: 15px;">bigdecimal</a> <a href="/tags/Git/" style="font-size: 15px;">Git</a> <a href="/tags/blog/" style="font-size: 15px;">blog</a> <a href="/tags/oracle文档/" style="font-size: 15px;">oracle文档</a> <a href="/tags/sql/" style="font-size: 15px;">sql</a> <a href="/tags/jdk8/" style="font-size: 15px;">jdk8</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">三月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">四月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">一月 2018</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> 友情链接</i></div><ul></ul><a href="http://blog.csdn.net/Armour__r" title="CSDN博客" target="_blank">CSDN博客</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">Baidu Site Haritası</a> |  <a href="/atom.xml">订阅</a> |  <a href="/about/">关于</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次</p><p><span> Copyright &copy;<a href="/." rel="nofollow">Fake_Armour.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.json.js?v=2.0.1"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.1" async></script><script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":["mshare","weixin","tsina","qzone","linkedin","fbook","twi","print","renren","sqq","evernotecn","bdysc","tqq","tqf","bdxc","kaixin001","tieba","douban","bdhome","thx","ibaidu","meilishuo","mogujie","diandian","huaban","duitang","hx","fx","youdao","sdo","qingbiji","people","xinhua","mail","isohu","yaolan","wealink","ty","iguba","h163","copy"],"bdPic":"","bdStyle":"1","bdSize":"16"},"share":{},"image":{"viewList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"],"viewText":"分享到：","viewSize":"16"},"selectShare":{"bdContainerClass":null,"bdSelectMiniList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"]}};with(document)0[(getElementsByTagName('head')[0]||head).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script></body></html>